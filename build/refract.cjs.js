"use strict";function e(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"[object Object]"===Object.prototype.toString.call(e)}function t(e){return["boolean","string","number","undefined"].includes(typeof e)||null===e||e instanceof Error}Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n="http://www.w3.org/2000/svg",r=new Set(["svg","a","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tspan","use","view"]),o=new Set(["math","maction","maligngroup","malignmark","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mlongdiv","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mscarries","mscarry","msgroup","msline","mspace","msqrt","msrow","mstack","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),i=/(PointerCapture)$|Capture$/i,s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function l(e,t,n,r){e.__propName=t;const o=function(e){if("function"!=typeof e)throw new Error("reactive takes a render function as the argument");Z=e;const t=e();return Z=null,t}(e);null!=o&&!1!==o&&(a(t,o,n,r),e.__signals&&function(e,t){J.set(e,t)}(e,n))}const p=/(PointerCapture)$|Capture$/i;function a(t,r,o,i){if("style"!=t){if("o"===t[0]&&"n"===t[1]&&"function"==typeof r){const e=t!=(t=t.replace(p,"$1"));return t=t.toLowerCase()in o||"onFocusOut"==t||"onFocusIn"==t||"onGotPointerCapture"===t||"onLostPointerCapture"===t?t.toLowerCase().slice(2):t.slice(2),void o.addEventListener(t,r,e)}if(i===n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&"popover"!==t&&t in o)try{return void("value"===t&&"SELECT"===o.tagName?setTimeout((()=>{o[t]=r??""})):o[t]=r??"")}catch(l){}null==r||!1===r&&"-"!==t[4]||o.setAttribute(t,"popover"===t&&!0===r?"":r)}else!function(t,n){if(!function(t){return e(t)||"string"==typeof t}(t))throw new Error("Style attribute must be a plain object or a string");if("string"==typeof t)n.setAttribute("style",t);else{const e=function(e){const t={};for(const n in e){const r=e[n];"object"==typeof r&&null!==r||null!=r&&!1!==r&&""!==r&&(t[n]=r)}return t}(t);n.setAttribute("style",function(e){const t=[];for(const n in e){const r=e[n],o=n.replace(/([A-Z])/g,"-$1").toLowerCase();"number"!=typeof r||s.test(o)?t.push(`${o}: ${r};`):t.push(`${o}: ${r}px;`)}return t.join(" ")}(e))}}(r,o)}const c=Symbol("FRAGMENT");function u(e,t,...n){if("FRAGMENT"===e){const e=f(n);return e[c]=!0,e}return{type:e,props:{...t,children:f(n)}}}function f(n){return n.map((n=>{if("object"==typeof n){if(Array.isArray(n))return f(n);if(null===n)return d("");if(!n.type||!n.props)throw new Error("Invalid type for a dom node, found "+n);return n}if("function"==typeof n){const r=function(n){var r;if("function"!=typeof n)throw new Error("reactive takes a render function as the argument");Z=n;const o=n();if(Z=null,!t(o)&&e(o)&&!o.type&&!o.props&&!(null==(r=o.props)?void 0:r.children))throw new Error("Reactive value must be primitive or functional component, got: "+typeof o);return o}(n);if(t(r))return h("TEXT_CHILD",{nodeValue:null!=r&&!1!==r?String(r):"",children:[]},n);if(Array.isArray(r))return h("FRAGMENT",{children:r[c]?r:f(r)},n);if(!r.type||!r.props)throw new Error("Invalid type for a dom node, found "+r);return h(r.type,r.props,n)}return d(n)})).flat()}function d(e){return{type:"TEXT_CHILD",props:{nodeValue:null!=e&&!1!==e?String(e):"",children:[]}}}function h(e,t,n){return{type:e,renderFunction:n,props:t}}function y(e){let t=null;r.has(e.type)?t=n:o.has(e.type)&&(t="http://www.w3.org/1998/Math/MathML");const i="TEXT_CHILD"===e.type?document.createTextNode(""):t?document.createElementNS(t,e.type,e.props.is&&e.props):document.createElement(e.type);if(!e.props)return i;e.props.ref&&e.props.ref instanceof te&&i instanceof HTMLElement&&(e.props.ref.current=i);for(const n in e.props){if("children"===(s=n)||"key"===s||"ref"===s)continue;const r=e.props[n];"function"==typeof r&&"o"!==n[0]&&"n"!==n[1]?l(r,n,i,t):a(n,r,i,t)}var s;return i}let m=[],g=null,v=null,w=[];function b(){for(let e=0;e<w.length;e++)de(w[e]);w.length=0}function _(e){b();let t=!1;for(;m.length>0&&!t;)E(m.pop()),t=e.timeRemaining()<1;if(0==m.length)return v&&g&&g.appendChild(v),void b();requestIdleCallback(_)}function E(e){var t;if("FRAGMENT"===e.type){const t=!e.props.children[c];let n=!1;for(let r=e.props.children.length-1;r>=0;r--)e.props.children[r].parent=e,t&&void 0===e.props.children[r].props.key&&e.renderFunction&&(n=!0),m.push(e.props.children[r])}else if("function"==typeof e.type){ce(e);const t=e.type(e.props);if(ue(),Array.isArray(t)){for(let n=t.length-1;n>=0;n--)t[n].parent=e,m.push(t[n]);e.props.children=t}else t.parent=e,e.props.children.push(t),m.push(t);w.push(e)}else{e.dom||(e.dom=y(e));let n=e.parent;for(;n&&!n.dom;)n=n.parent;n&&(null==(t=n.dom)||t.appendChild(e.dom));for(let t=e.props.children.length-1;t>=0;t--)e.props.children[t].parent=e,m.push(e.props.children[t])}A(e)}function S(e){if("FRAGMENT"===e.type)if(e.props.children[c])for(const t of e.props.children)t.parent=e,S(t);else{let t=!1;for(const n of e.props.children)n.parent=e,void 0===n.props.key&&(t=!0),S(n)}else if("function"!=typeof e.type)for(const t of e.props.children)t.parent=e,S(t);A(e)}function x(e,t,n,r,o){var i,s;if("FRAGMENT"===e.type)for(const l of e.props.children)r&&(l.parent=e),x(l,t,n,r,o);else if("function"==typeof e.type){ce(e);const r=e.type(e.props);if(ue(),Array.isArray(r)){for(const i of r)i.parent=e,x(i,t,n,!0,o);e.props.children=r}else r.parent=e,e.props.children.push(r),x(r,t,n,!0,o);queueMicrotask((()=>{de(e)}))}else{if(e.dom||(e.dom=y(e)),t)n?null==(i=t.parentElement)||i.replaceChild(e.dom,t):null==(s=t.parentElement)||s.insertBefore(e.dom,t);else{let t;if(o)t=o;else{let n=e.parent;for(;n&&!n.dom;)n=n.parent;t=null==n?void 0:n.dom}null==t||t.appendChild(e.dom)}for(const t of e.props.children)r&&(t.parent=e),x(t,void 0,void 0,r,e.dom)}r&&A(e)}let k=!0;function F(e,t){if(e&&k){if(e.renderFunction&&(t&&function(e){W.delete(e);const t=e.__signals;if(t){for(const n of t)n.removeDep(e);e.__signals=null}}(e.renderFunction),delete e.renderFunction),e.dom){for(const t in e.props)if(T(t)){let n=t.toLowerCase().substring(2);const r=n!=(n=n.replace(i,"$1"));e.dom.removeEventListener(n,e.props[t],r),delete e.props[t]}else"function"==typeof e.props[t]?U(e.props[t]):"ref"===t&&e.props[t]instanceof te&&(e.props[t].current=null);e.dom.remove()}"function"==typeof e.type&&(function(e){const t=ae.get(e);if(t){if(t.cleanup)for(const e of t.cleanup)e();t.cleanup=[];for(const e of t.effects){if(e.__cleanup&&"function"==typeof e.__cleanup&&e.__cleanup(),e.__signals)for(const t of e.__signals)t.removeDep(e);delete e.__signals,delete e.__cleanup}t.signals.forEach((e=>e.clearDeps())),t.signals.clear()}ae.delete(e)}(e,e.props),delete e.type),e.props.children.forEach((e=>F(e,!0)))}}function A(e){e.renderFunction&&function(e,t){W.set(e,t)}(e.renderFunction,e)}function C(e,n){if(t(n)){const t={...d(n),parent:e.parent};S(t),R(e,t)}else if(Array.isArray(n)){const t={type:"FRAGMENT",props:{children:n[c]?n:f(n)},parent:e.parent};S(t),R(e,t)}else{const t={...n,parent:e.parent};S(t),R(e,t)}}function P(e,t){e.renderFunction&&(t.renderFunction=e.renderFunction,A(t))}function M(e,t,n){var r;void 0===n?null==(r=e.parent)||r.props.children.forEach(((n,r)=>{n===e&&(e.parent.props.children[r]=t)})):e.parent.props.children[n]=t}const T=e=>e.startsWith("on")||"onFocusOut"==e||"onFocusIn"==e,I=e=>"children"!==e&&!T(e)&&"key"!==e&&"ref"!==e,N=(e,t,n)=>e[n]!==t[n],L=(e,t,n)=>!(n in t);function j(e,t){var n,r;return e===t||e.type===t.type&&(null==(n=e.props)?void 0:n.key)===(null==(r=t.props)?void 0:r.key)&&O(e.props,t.props)}function O(e,n){if(e===n){if(e instanceof re&&n instanceof re)return O(e.value,n.value);if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(!O(e[t],n[t]))return!1}return!0}if(t(e)&&t(n))return e===n;if(typeof e!=typeof n)return!1;const r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(let t of r)if("children"!==t){if(!n.hasOwnProperty(t))return!1;if(!O(e[t],n[t]))return!1}return!0}function G(e){if(e){if(e.dom)return e.dom;for(const t of e.props.children){const e=G(t);if(e)return e}}}function D(e){if(e){if(e.dom)return e.dom;for(let t=e.props.children.length-1;t>=0;t--){const n=D(e.props.children[t]);if(n)return n}}}function R(e,t,n){if(e||t)if(e&&!t)F(e,!0),e.parent.props.children=e.parent.props.children.filter((t=>t!==e));else if(e&&t){const r=e.props,o=t.props;if("FRAGMENT"===e.type||"function"==typeof e.type)if("FRAGMENT"===t.type||"function"==typeof t.type)typeof e.type==typeof t.type&&"function"==typeof e.type?j(e,t)||(x(t,G(e),void 0,!0),P(e,t),F(e),M(e,t,n)):H(e,t);else{t.parent=e.parent;let r=e.props.children[0];for(;r&&!r.dom;)r=r.props.children[0];x(t,null==r?void 0:r.dom),P(e,t),F(e),M(e,t,n)}else{const s=e.dom;if("TEXT_CHILD"!==e.type||"TEXT_CHILD"!==t.type||t.dom||(t.dom=e.dom),void 0===s)return;if("FRAGMENT"===t.type||"function"==typeof t.type)t.parent=e.parent,P(e,t),x(t,s),F(e),M(e,t,n);else{for(const e in r)if(I(e)&&L(r,o,e))s[e]="";else if(T(e)&&(!(e in o)||N(r,o,e))){let t=e.toLowerCase().substring(2);const n=t!=(t=t.replace(i,"$1"));s.removeEventListener(t,r[e],n)}if(e.type!==t.type)t.parent=e.parent,P(e,t),x(t,s,!0),F(e),M(e,t,n);else{for(const e in o)if(I(e)&&N(r,o,e))s[e]=o[e],r[e]=o[e];else if(T(e)&&N(r,o,e)){let t=e.toLowerCase().substring(2);const n=t!=(t=t.replace(i,"$1"));s.addEventListener(t,o[e],n),r[e]=o[e]}H(e,t)}}}}}function $(e,t,n){if(e.dom){if(e.dom===t||e.dom===n)return;n?t.insertBefore(e.dom,n):t.appendChild(e.dom)}else for(const r of e.props.children)$(r,t,n)}function H(e,t){const n="FRAGMENT"===t.type&&!t.props.children[c],r="FRAGMENT"===e.type&&!e.props.children[c];n&&r?!1===function(e,t){var n;const r=e.props.children,o=t.props.children,i={};for(let a=0;a<r.length;a++){const e=r[a].props.key;if(null==e||i.hasOwnProperty(String(e)))return!1;i[String(e)]=r[a]}const s=null==(n=function(e){if(e)for(let t=e.props.children.length-1;t>=0;t--){const n=D(e.props.children[t]);if(n)return n}}(e))?void 0:n.nextSibling,l=function(e){if(!e)return;let t=e.parent;for(;t&&!t.dom;)t=t.parent;return t}(e);if(0===o.length)return e.props.children.length=0,void((null==l?void 0:l.dom)instanceof HTMLElement&&(l.dom.innerHTML=""));const p=e.props.children.length;for(let a=0;a<o.length;a++){const n=o[a],r=n.props.key,c=String(r);if(i.hasOwnProperty(c)){const n=i[c];p>a?e.props.children[a]=n:e.props.children.push(n),delete i[c];const r=t.props.children[a];r&&(r.parent=e),R(n,r,a),$(e.props.children[a],null==l?void 0:l.dom,s)}else p>a?e.props.children[a]=n:e.props.children.push(n),n.parent=e,x(n,s,!1,!1,null==l?void 0:l.dom)}for(const a in i)i.hasOwnProperty(a)&&F(i[a],!0);for(;e.props.children.length>t.props.children.length;)e.props.children.pop()}(e,t)&&X(e,t):X(e,t),"FRAGMENT"===t.type&&t.props.children[c]?e.props.children[c]=!0:e.props.children[c]=!1,e.type=t.type}function z(e,t){var n;let r=Math.max(e.props.children.length,t.props.children.length);for(let o=0;o<r;o++){let i=e.props.children[o],s=t.props.children[o];if(s&&(s.parent=e),!i&&s)x(s,null==(n=D(e.props.children.at(-1)))?void 0:n.nextSibling),e.props.children.push(s);else if(!s&&i)F(i,!0),e.props.children.splice(o,1),r=e.props.children.length,o--;else{R(i,s,o);const n=Math.max(e.props.children.length,t.props.children.length);n<r&&(r=n,o--)}}}function X(e,t){let n=Math.max(e.props.children.length,t.props.children.length);const r={};let o=0;for(let l=0;l<e.props.children.length;l++){const n=e.props.children[l].props.key;if(null!=n){if(o++,r.hasOwnProperty(String(n)))return void z(e,t);r[String(n)]={fiber:e.props.children[l],index:l}}}if(0==o)return void z(e,t);const i={};for(let l=0;l<t.props.children.length;l++){const n=t.props.children[l].props.key;if(null==n)continue;const o=r[String(n)];if(o){if(i.hasOwnProperty(String(n)))return void z(e,t);i[String(n)]={fiber:o.fiber,newIndex:l,oldIndex:o.index}}}const s=function(e){if(!e)return;if(e.dom)return e;let t=e.parent;for(;t&&!t.dom;)t=t.parent;return t}(e);for(let l=0;l<n;l++){let r=e.props.children[l],o=t.props.children[l];const p=(null==o?void 0:o.props.key)?String(o.props.key):"",a=i.hasOwnProperty(p);let c=(null==r?void 0:r.props.key)?String(r.props.key):"";if(c&&p&&c===p){R(r,o,l),(null==s?void 0:s.dom)&&$(e.props.children[l],s.dom);continue}const u=i.hasOwnProperty(c)&&i[c].newIndex>l,f=i.hasOwnProperty(c)&&i[c].newIndex<l;if((u||f)&&(k=!1),o&&(o.parent=e),!r&&o)if(a){const{fiber:t}=i[p];e.props.children.push(t),R(t,o,l),(null==s?void 0:s.dom)&&$(e.props.children[l],s.dom)}else(null==s?void 0:s.dom)&&x(o,void 0,!1,!1,s.dom),e.props.children.push(o);else if(!o&&r)F(r,!0),e.props.children.splice(l,1),n=e.props.children.length,l--;else if(a){const{fiber:t}=i[p];F(r,!0),k=!0,e.props.children[l]=t,R(t,o,l),(null==s?void 0:s.dom)&&$(e.props.children[l],s.dom)}else if(u||f)(null==s?void 0:s.dom)&&x(o,void 0,!1,!1,s.dom),e.props.children[l]=o;else{R(r,o,l),(null==s?void 0:s.dom)&&$(e.props.children[l],s.dom);const i=Math.max(e.props.children.length,t.props.children.length);i<n&&(n=i,l--)}k=!0}}"undefined"!=typeof process&&"test"===process.env.NODE_ENV&&(module.exports={createFiber:S,commitDeletion:F,commitFiber:x,updateFiber:C,deepCompareFibers:j,deepEqual:O});let q=!1;const V=new Set,B=new Set,W=new WeakMap,J=new WeakMap;function U(e){J.delete(e);const t=e.__signals;if(t){for(const n of t)n.removeDep(e);e.__signals=null}}let Z=null,K=null;function Q(e){Z.__signals||(Z.__signals=new Set),Z.__signals.add(e)}function Y(e){K.__signals||(K.__signals=new Set),K.__signals.add(e)}function ee(e,t){if("function"!=typeof e)return;K=e;const n=e();K.__signals&&"function"==typeof n&&(K.__cleanup=n),!K.__signals&&n&&"function"==typeof n&&(t?function(e,t){t&&(ae.has(t)?ae.get(t).cleanup.push(e):ae.set(t,{signals:new Set,cleanup:[e],effects:new Set}))}(n,t):he(n)),K=null}class te{constructor(e){this.current=e}}const ne=["push","pop","unshift","shift","splice","fill","copyWithin","sort","reverse"];class re{constructor(e){this.isNotified=!1,this._val=e,this.deps=new Set}notify(){this.isNotified||(0!==this.deps.size&&(this.isNotified=!0),this.deps.forEach((e=>{var t;t=()=>(this.isNotified=!1,e),V.add(t),q||(q=!0,queueMicrotask((()=>{V.forEach((e=>{const t=e();if(B.has(t))return;B.add(t),t.__cleanup&&"function"==typeof t.__cleanup&&(t.__cleanup(),t.__cleanup=null);const n=t();if("function"==typeof n&&(t.__cleanup=n),W.has(t)){const e=W.get(t);e&&C(e,n)}if(J.has(t)){const e=J.get(t);e&&t.__propName&&function(e,t,n){null!=n&&"key"!==e&&a(e,n,t)}(t.__propName,e,n)}})),B.clear(),V.clear(),q=!1})))})))}removeDep(e){this.deps.delete(e)}clearDeps(){this.deps.clear()}}class oe extends re{constructor(e){if(!t(e))throw new Error("Invalid type for PrimitiveSignal. Valid types: [boolean, string, number, undefined, null]");super(e)}get value(){return K&&(this.deps.add(K),Y(this)),Z&&(this.deps.add(Z),Q(this)),this._val}update(e){if("function"==typeof e){const n=e(this._val);if(!t(n))throw new Error("Invalid type for PrimitiveSignal. Valid types: [boolean, string, number, undefined, null]");if(n===this._val)return;this._val=n,this.notify()}else{if(!t(e))throw new Error("Invalid type for PrimitiveSignal. Valid types: [boolean, string, number, undefined, null]");if(e===this._val)return;this._val=e,this.notify()}}}class ie extends re{constructor(e){if(!Array.isArray(e))throw new Error("Invalid type for ArraySignal; value must be an array");super(e),this.updateCalled=!1,this._val=this.createProxy(e)}createProxy(e){return new Proxy(e,{get:(e,t)=>{const n=e[t];if("function"==typeof n){if(ne.includes(String(t))&&!this.updateCalled)throw new Error("Cannot set a value on an array signal, use the update method for updating the array.");return(...r)=>{const o=n.apply(e,r);return ne.includes(String(t))&&this.notify(),o}}return n},set:(e,t,n)=>{if(!this.updateCalled)throw new Error("Cannot set a value on an array signal, use the update method for updating the array.");return e[t]=n,this.notify(),!0}})}get value(){return K&&(this.deps.add(K),Y(this)),Z&&(this.deps.add(Z),Q(this)),this._val}update(e){if(this.updateCalled=!0,"function"==typeof e)e(this._val);else{if(!Array.isArray(e))throw new Error("Invalid type for ArraySignal; value must be an array");if(e===this._val)return;this._val=this.createProxy(e),this.notify()}this.updateCalled=!1}}class se extends re{constructor(t){if(!e(t))throw new Error("Invalid type for ObjectSignal; value must be a plain object");super(t),this.updateCalled=!1,this._val=this.createProxy(t)}createInternalArrayProxy(e){return new Proxy(e,{get:(e,t)=>{const n=e[t];if("function"==typeof n){if(!this.updateCalled&&ne.includes(String(t)))throw new Error("Cannot set a value on an object signal, use the update method for updating the object.");return(...r)=>{const o=n.apply(e,r);return ne.includes(String(t))&&this.notify(),o}}return n},set:(e,t,n)=>{if(!this.updateCalled)throw new Error("Cannot set a value on an object signal, use the update method for updating the object.");return e[t]=n,this.notify(),!0}})}createProxy(e){return new Proxy(e,{get:(e,t)=>{const n=e[t];return Array.isArray(n)?(e[t]=this.createInternalArrayProxy(n),e[t]):n},set:(e,t,n)=>{if(!this.updateCalled)throw new Error("Cannot set a value on an object signal, use the update method for updating the object.");return"function"!=typeof n&&("object"==typeof n&&null!==n&&(n=this.createProxy(n)),n===e[t]||(e[t]=n,this.notify()),!0)},deleteProperty:(e,t)=>{const n=delete e[t];return this.notify(),n}})}get value(){return K&&(this.deps.add(K),Y(this)),Z&&(this.deps.add(Z),Q(this)),this._val}update(t){if(this.updateCalled=!0,"function"==typeof t)t(this._val);else{if(!e(t))throw new Error("Invalid type for ObjectSignal; value must be a plain object");if(t===this._val)return;this._val=this.createProxy(t),this.notify()}this.updateCalled=!1}}function le(n){if("function"==typeof n)throw new Error("Functions cannot be used as signal value");if("object"==typeof n&&null!==n){if(Array.isArray(n)){const e=new ie(n);return me(e),{get value(){return e.value},update:e.update.bind(e)}}if(e(n)){const e=new se(n);return me(e),{get value(){return e.value},update:e.update.bind(e)}}throw new Error("Invalid type for signal initialization: "+typeof n)}if(t(n)){const e=new oe(n);return me(e),{get value(){return e.value},update:e.update.bind(e)}}throw new Error("Invalid type for signal initialization: "+typeof n)}let pe=null,ae=new WeakMap;function ce(e){pe=e}function ue(){pe=null}function fe(){return pe}function de(e){if(ae.has(e)){const t=ae.get(e);for(const n of t.effects)ee(n,e)}}function he(e){pe&&(ae.has(pe)?ae.get(pe).cleanup.push(e):ae.set(pe,{signals:new Set,cleanup:[e],effects:new Set}))}function ye(e){if(pe)if(ae.has(pe))ae.get(pe).effects.add(e);else{const t=new Set;t.add(e),ae.set(pe,{signals:new Set,cleanup:[],effects:t})}}function me(e){if(pe)if(ae.has(pe))ae.get(pe).signals.add(e);else{const t=new Set;t.add(e),ae.set(pe,{signals:t,cleanup:[],effects:new Set})}}exports.cleanUp=he,exports.computed=function(e){if("function"!=typeof e)throw new Error("computed takes a function as the argument");let t=null!==fe();K=()=>{t?t=!1:n.update(e())},ye(K);const n=le(e());return K=null,{get value(){return n.value}}},exports.createEffect=function(e){if("function"!=typeof e)throw new Error("createEffect takes a effect function as the argument");ye(e),fe()||ee(e)},exports.createElement=u,exports.createPromise=function(e){if("function"!=typeof e)throw new Error("createPromise takes a function as the argument");const t=e();if(!(t instanceof Promise))throw new Error("createPromise takes a function that returns a promise");const n=le({status:"pending",data:null,error:null});return t.then((e=>{n.update((t=>{t.data=e,t.status="resolved"}))})).catch((e=>{n.update((t=>{t.error=e,t.status="rejected"}))})),{get value(){return n.value}}},exports.createRef=function(){return new te(null)},exports.createSignal=le,exports.lazy=function(e){let t=null;return n=>{const r=le(!0),o=le(null);((n,r)=>{t?(n.update(!1),r.update(null)):e().then((e=>{if(e.default){if("function"!=typeof e.default)throw new Error("Lazy-loaded component must be a functional component");t=e.default,n.update(!1),r.update(null)}else r.update(new Error("No default export found from lazy-loaded module"))})).catch((e=>{r.update(e),n.update(!1)}))})(r,o);const i=e=>"string"==typeof e||e&&"object"==typeof e&&"props"in e&&"type"in e;if(void 0!==n.fallback&&!i(n.fallback))throw new Error("Invalid fallback: Expected a string or a valid JSX node.");if(void 0!==n.errorFallback&&"function"!=typeof n.errorFallback&&!i(n.errorFallback))throw new Error("Invalid errorFallback: Expected a string, a valid JSX node, or a function returning a JSX node.");return u("FRAGMENT",null,(()=>r.value?n.fallback:null!==o.value?n.errorFallback?"function"==typeof n.errorFallback?n.errorFallback(o.value):n.errorFallback:"Unknown error occurred while lazy loading component, use errorFallback prop to override":t&&u(t,{...n})))}},exports.render=function(e,t){g=t;const n=document.createDocumentFragment();v=n;const r={type:"div",props:{children:[e]},dom:n};e.parent=r,m.push(e),requestIdleCallback(_)};
//# sourceMappingURL=refract.cjs.js.map
